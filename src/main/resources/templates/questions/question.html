<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<body>

<div class="container">

    <div th:replace="fragments/bodyHeader :: bodyHeader" />

<!--    <div id="q_item">-->
<!--        <h5 class="card-title" th:text="${q.text}">question title</h5>-->
<!--    </div>-->

    <div class="card" id="q_item">
        <h5 class="card-header">Q1</h5>
        <div class="card-body">
            <h5 class="card-title" th:text="${q.text}">question title</h5>
            <div class="input-group px-4 py-2" th:each="option : ${options}">
                <div class="input-group-prepend" >
                    <div class="input-group-lg">
                        <input type="radio" th:value="${option.text}" class="form-check-input">
                    </div>
                </div>
                <label th:text="${option.text}" class="form-check-label">
                    BOOK
                </label>
            </div>
        </div>
    </div>

<!--    <div class="card" >-->
<!--        <h5 class="card-header">Q1</h5>-->
<!--        <div class="card-body" th:fragment="card">-->
<!--            <h5 class="card-title">question title</h5>-->
<!--            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>-->
<!--&lt;!&ndash;            <a href="#" class="btn btn-primary">Go somewhere</a>&ndash;&gt;-->
<!--            <div class="input-group px-4 py-2" th:each="option : ${options}">-->
<!--                <div class="input-group-prepend" >-->
<!--                    <div class="input-group-lg">-->
<!--                        <input type="radio"  th:value="${option.id}" class="form-check-input">-->
<!--                    </div>-->
<!--                </div>-->
<!--                <label  th:text="${option.text}" class="form-check-label">-->
<!--                    BOOK-->
<!--                </label>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

    <div class="row py-2">
        <div class="col">
            <button type="button" id="prevBtn"class="btn btn-primary btn-lg btn-block" onclick="prevQuestion()">이전</button>
        </div>
        <div class="col">
            <button type="button" id="nextBtn"class="btn btn-primary btn-lg btn-block" onclick="nextQuestion()">다음</button>
        </div>
    </div>

    <!-- 추가 -->
<!--    <h2 th:if="${param.status}" th:text="'저장 완료'"></h2>-->

<!--    <div>-->
<!--        <label for="itemId">상품 ID</label>-->
<!--        <input type="text" id="itemId" name="itemId" class="form-control" value="1" th:value="${item.id}" readonly>-->
<!--    </div>-->
<!--    <div>-->
<!--        <label for="itemName">상품명</label>-->
<!--        <input type="text" id="itemName" name="itemName" class="form-control" value="상품A" th:value="${item.itemName}" readonly>-->
<!--    </div>-->
<!--    <div>-->
<!--        <label for="price">가격</label>-->
<!--        <input type="text" id="price" name="price" class="form-control" value="10000" th:value="${item.price}" readonly>-->
<!--    </div>-->
<!--    <div>-->
<!--        <label for="quantity">수량</label>-->
<!--        <input type="text" id="quantity" name="quantity" class="form-control" value="10" th:value="${item.quantity}" readonly>-->
<!--    </div>-->

<!--    <hr class="my-4">-->

<!--    <div class="row">-->
<!--        <div class="col">-->
<!--            <button class="w-100 btn btn-primary btn-lg"-->
<!--                    onclick="location.href='editForm.html'"-->
<!--                    th:onclick="|location.href='@{/items/{itemId}/edit(itemId=${item.id})}'|"-->
<!--                    type="button">상품 수정</button>-->
<!--        </div>-->
<!--        <div class="col">-->
<!--            <button class="w-100 btn btn-secondary btn-lg"-->
<!--                    onclick="location.href='items.html'"-->
<!--                    th:onclick="|location.href='@{/items}'|"-->
<!--                    type="button">목록으로</button>-->
<!--        </div>-->
<!--    </div>-->

</div> <!-- /container -->

    <script th:inline="javascript">
        let q_pool = [];
        let idx = 1;

        $(document).ready(function(){
            q_pool = [[${uq.question_set}]].split(',');
        });

        function nextQuestion() {

            if(q_pool.length == idx) {
                alert("마지막 문제임");
            } else {

                let Question = {id: q_pool[idx]};
                $.ajax({
                    url: "/questions/question",
                    type: 'post',
                    // data : JSON.stringify({q_id:q_pool[idx]}),
                    data: Question,
                    success: function (response) {
                        $("#q_item").replaceWith(response);
                        idx++;
                        if(q_pool.length == idx) {

                            $("#nextBtn").text("제출")
                                .removeClass("btn-primary")
                                .addClass("btn-warning");
                        }
                    },
                    error: function (response) {
                        alert("에러발생");
                    }

                });
            }
        }

        function prevQuestion() {
            alert("prev");
        }

    </script>
</body>
</html>